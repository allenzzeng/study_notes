# C++ 网络通信程序示例

## 项目介绍
本项目是一个基于 C++ 的简单网络通信程序，实现了 TCP 客户端与服务器的交互功能。程序采用事件驱动（epoll）和线程池技术，支持多客户端并发连接，主要用于学习网络编程和并发处理的基础原理。

该项目的实现思路参考了 [30daysCppWebServer](https://github.com/Wlgls/30daysCppWebServer) 项目的第 11 章节，重点学习了 Reactor 模式、I/O 多路复用和线程池的应用。


## 核心功能
- 服务器端：基于 epoll 的事件驱动模型，支持多客户端并发连接，实现数据回声功能
- 客户端：可与服务器建立连接，发送数据并接收服务器的回声响应
- 测试程序：通过线程池模拟多客户端并发连接，测试服务器的处理能力


## 编译与运行

### 编译命令
项目提供了 `Makefile` 用于便捷编译，支持以下命令：

| 命令 | 说明 |
|------|------|
| `make server` | 编译服务器程序 |
| `make client` | 编译客户端程序 |
| `make test` | 编译多客户端测试程序 |
| `make th` | 编译线程池测试程序 |
| `make clean` | 清理所有编译生成的可执行文件 |
| `make c11` | 使用 C++11 标准编译（包含线程池支持） |


### 运行示例

1. 启动服务器（我是在windows的wsl下使用）：
```bash
./server
```

2. 启动客户端（新终端）：
```bash
./client
```
客户端启动后可输入文本，服务器会将收到的内容原样返回（回声功能）。

3. 多客户端并发测试：
```bash
./test -t 10 -m 5 -w 0
```
- `-t`：指定客户端线程数（此处为 10 个客户端）
- `-m`：每个客户端发送的消息数量（此处为 5 条）
- `-w`：客户端启动前的等待时间（秒，此处为 0）


## 技术要点
- 采用 epoll 实现 I/O 多路复用，支持高并发连接
- 基于 Reactor 模式设计，包含 EventLoop、Channel、Epoll 等核心组件
- 线程池用于异步处理客户端请求，避免阻塞事件循环
- 非阻塞 I/O 结合边缘触发（ET）模式，提高 I/O 效率
- 封装 Socket、InetAddress 等类，简化网络编程接口


## 注意事项
- 程序仅支持 Linux 系统（依赖 epoll 机制）
- 编译需要支持 C++11 及以上标准的编译器
- 测试时可通过调整 `test` 程序的参数（线程数、消息数）来验证服务器的并发能力
- 代码中存在的潜在问题（如注释中提到的段错误风险）可作为学习和优化的方向
